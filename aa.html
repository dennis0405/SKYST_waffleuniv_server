<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebSocket Testing</title>
    <script>
        let socket;

        function connectWebSocket() {
            const wsUrl = document.getElementById("wsUrl").value;
            socket = new WebSocket(wsUrl);

            socket.onopen = () => {
                console.log("WebSocket connection established.");
                alert("WebSocket connection established.");
            };

            socket.onmessage = (event) => {
                console.log("Message received:", event.data);
                const messages = document.getElementById("messages");
                const messageElement = document.createElement("div");
                messageElement.textContent = event.data;
                messages.appendChild(messageElement);
            };

            socket.onclose = () => {
                console.log("WebSocket connection closed.");
                alert("WebSocket connection closed.");
            };

            socket.onerror = (error) => {
                console.error("WebSocket error:", error);
                alert("WebSocket error occurred. Check the console for details.");
            };
        }

        function sendMessage() {
            const message = document.getElementById("message").value;
            if (socket && socket.readyState === WebSocket.OPEN) {
                socket.send(message);
                console.log("Message sent:", message);
            } else {
                alert("WebSocket is not connected.");
            }
        }

        function closeWebSocket() {
            if (socket) {
                socket.close();
            } else {
                alert("WebSocket is not connected.");
            }
        }
    </script>
</head>
<body>
<h1>WebSocket Testing</h1>

<h2>Connect to WebSocket</h2>
<label for="wsUrl">WebSocket URL:</label>
<input type="text" id="wsUrl" placeholder="ws://localhost:8080/ws" required>
<button onclick="connectWebSocket()">Connect</button>

<h2>Send Message</h2>
<label for="message">Message:</label>
<input type="text" id="message" placeholder="Type your message here">
<button onclick="sendMessage()">Send</button>

<h2>Close Connection</h2>
<button onclick="closeWebSocket()">Close WebSocket</button>

<h2>Received Messages</h2>
<div id="messages" style="border: 1px solid #ccc; padding: 10px; height: 200px; overflow-y: scroll;">
    <!-- Messages will appear here -->
</div>
</body>
</html>
